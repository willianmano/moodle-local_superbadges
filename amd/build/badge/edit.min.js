define("local_superbadges/badge/edit",["exports","jquery","core_form/modalform","core/str","local_superbadges/notification"],(function(_exports,_jquery,_modalform,_str,_notification){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}let eventTarget;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_modalform=_interopRequireDefault(_modalform),_notification=_interopRequireDefault(_notification);_exports.init=(selector,courseid)=>{(0,_jquery.default)("body").on("click",selector,(function(event){event.preventDefault(),eventTarget=(0,_jquery.default)(event.currentTarget),openModal()}))};const openModal=()=>{const modal=new _modalform.default({formClass:"local_superbadges\\forms\\badge",args:{formdata:{id:eventTarget.data("id"),courseid:eventTarget.data("courseid"),badgeid:eventTarget.data("badgeid"),name:eventTarget.data("name"),description:eventTarget.data("description")}},saveButtonText:(0,_str.get_string)("editbadge","local_superbadges"),modalConfig:{title:(0,_str.get_string)("editbadge","local_superbadges")}});modal.addEventListener(modal.events.FORM_SUBMITTED,(event=>{if(event.detail.message){(0,_notification.default)(event.detail.message);let data=JSON.parse(event.detail.data);return changeTableRowData(data)}{const warningMessages=event.detail.warnings.map((warning=>warning.message));(0,_notification.default)(warningMessages.join("<br>"),"error")}})),modal.show()},changeTableRowData=data=>{eventTarget.closest("tr").find("td:first").html(data.name),eventTarget.data("name",data.name),eventTarget.data("description",data.description),eventTarget.closest("tr").hide("normal").show("normal")}}));

//# sourceMappingURL=edit.min.js.map