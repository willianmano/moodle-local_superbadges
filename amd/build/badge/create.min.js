define("local_superbadges/badge/create",["exports","jquery","core_form/modalform","core/str","local_superbadges/notification","core/config"],(function(_exports,_jquery,_modalform,_str,_notification,_config){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_modalform=_interopRequireDefault(_modalform),_notification=_interopRequireDefault(_notification),_config=_interopRequireDefault(_config);_exports.init=(selector,courseid)=>{document.querySelectorAll(selector).forEach((target=>target.addEventListener("click",(event=>{event.preventDefault(),openModal(courseid)}))))};const openModal=async courseid=>{const modal=new _modalform.default({formClass:"local_superbadges\\forms\\badge",args:{formdata:{courseid:courseid}},saveButtonText:(0,_str.get_string)("createbadge","local_superbadges"),modalConfig:{title:(0,_str.get_string)("createbadge","local_superbadges")}});modal.addEventListener(modal.events.FORM_SUBMITTED,(event=>{if(event.detail.message){(0,_notification.default)(event.detail.message);let data=JSON.parse(event.detail.data);return addBadgeToTable(data)}{const warningMessages=event.detail.warnings.map((warning=>warning.message));Notification.addNotification({type:"error",message:warningMessages.join("<br>")})}})),modal.show()},addBadgeToTable=data=>{(0,_jquery.default)('<tr><th scope="row">'+data.id+"</th><td>"+data.name+'</td><td style="width: 200px; text-align: center;"><a href="#" data-id="'+data.id+'" class="btn btn-info btn-sm deliver-badge"><i class="fa fa-paper-plane-o"></i></a> <a href="'+_config.default.wwwroot+"/local/superbadges/requirements.php?id="+data.id+'" data-id="'+data.id+'" class="btn btn-primary btn-sm"><i class="fa fa-list"></i></a></a> <a href="#" data-id="'+data.id+'" data-name="'+data.name+'" data-description="'+data.description+'" data-courseid="'+data.courseid+'" data-badgeid="'+data.badgeid+'" class="btn btn-warning btn-sm edit-badge"><i class="fa fa-pencil-square-o text-white"></i></a> <a href="#" data-id="'+data.id+'" class="btn btn-danger btn-sm delete-badge"><i class="fa fa-trash-o"></i></a> </td></tr>').appendTo(".table-badges tbody").hide().fadeIn("normal")}}));

//# sourceMappingURL=create.min.js.map