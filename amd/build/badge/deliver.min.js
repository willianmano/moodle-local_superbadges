define("local_superbadges/badge/deliver",["exports","jquery","local_superbadges/sweetalert","local_superbadges/notification","core/str","./repository"],(function(_exports,_jquery,_sweetalert,_notification,_str,_repository){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_sweetalert=_interopRequireDefault(_sweetalert),_notification=_interopRequireDefault(_notification);let strings={CONFIRM_TITLE:"Are you sure?",CONFIRM_MSG:"Once delivered, the badge cannot be revoked!",CONFIRM_YES:"Yes, deliver it!",CONFIRM_NO:"Cancel"};const COMPONENT_STRINGS=[{key:"deliverbadge_confirm_title",component:"local_superbadges"},{key:"deliverbadge_confirm_msg",component:"local_superbadges"},{key:"deliverbadge_confirm_yes",component:"local_superbadges"},{key:"deliverbadge_confirm_no",component:"local_superbadges"}];_exports.init=trigger=>{(async()=>{const trasnslatedStrings=await(0,_str.get_strings)(COMPONENT_STRINGS);strings.CONFIRM_TITLE=trasnslatedStrings[0],strings.CONFIRM_MSG=trasnslatedStrings[1],strings.CONFIRM_YES=trasnslatedStrings[2],strings.CONFIRM_NO=trasnslatedStrings[3],strings.SUCCESS=trasnslatedStrings[4]})(),(0,_jquery.default)("body").on("click",trigger,(function(event){event.preventDefault();let eventTarget=(0,_jquery.default)(event.currentTarget);_sweetalert.default.fire({title:strings.CONFIRM_TITLE,text:strings.CONFIRM_MSG,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:strings.CONFIRM_YES,cancelButtonText:strings.CONFIRM_NO}).then((function(result){result.value&&deliverTheBadge(eventTarget)}))}))};const deliverTheBadge=async eventTarget=>{try{toggleButton(eventTarget);let response=await(0,_repository.deliverBadge)(eventTarget.data("id"));return toggleButton(eventTarget),(0,_notification.default)(response.message),!0}catch(e){return(0,_notification.default)(e.message,"error"),toggleButton(eventTarget),!1}},toggleButton=eventTarget=>{let btn=(0,_jquery.default)(eventTarget),icon=btn.find("i");btn.prop("disabled",((i,v)=>!v)),btn.prop("disabled")?(icon.removeClass("fa-paper-plane-o"),icon.addClass("fa-spinner fa-spin")):(icon.removeClass("fa-spinner fa-spin"),icon.addClass("fa-paper-plane-o"))}}));

//# sourceMappingURL=deliver.min.js.map